# Helm Chart - ASPM Relay

## Configuration Options

The following tables lists the ASPM Relay configurable parameters and their default values.

| Parameter                               | Description                                                                                                        | Default                                                       | Notes                                                                      |
|:----------------------------------------|:-------------------------------------------------------------------------------------------------------------------|:--------------------------------------------------------------|:---------------------------------------------------------------------------|
| `image.address`                         | ASPM Relay docker image address                                                                                    | `ghcr.io/bionicstork/bionicstork/relay:latest`                | Required                                                                   |
| `image.pullPolicy`                      | ASPM Relay docker image pull policy                                                                                | `Always`                                                      | Required                                                                   |
| `image.pullSecrets`                     | ASPM Relay docker image pull secrets                                                                               |                                                               |                                                                            |
| `relay.accessToken`                     | ASPM Relay access token. Will store in a Kubernetes secret when provided.                                          |                                                               | Required; Sensitive value that should not be committed to version control. |
| `relay.clusterName`                     | Kubernetes cluster name of the deployed ASPM Relay                                                                 |                                                               | Recommended for Kubernetes deployments.                                    |
| `relay.falconRegion`                    | CrowdStrike tenant region to connect to                                                                            |                                                               | Required                                                                   |
| `env`                                   | Environment variables to pass to the relay                                                                         |                                                               |                                                                            |
| `jobs.imageAddress`                     | Image address for jobs deployed during Kubernetes jobs collection                                                  | `ghcr.io/bionicstork/bionicstork/kubernetes-collector:latest` |                                                                            |
| `jobs.imagePullSecrets`                 | Image pull secrets for jobs deployed during Kubernetes jobs collection                                             |                                                               |                                                                            |
| `jobs.podLabels`                        | Pod labels for jobs deployed during Kubernetes jobs collection                                                     |                                                               |                                                                            |
| `serviceAccount.name`                   | Name of the created Kubernetes service account                                                                     | `aspm-sa`                                                     |                                                                            |
| `serviceAccount.annotations`            | Annotations for the created Kubernetes service account                                                             |                                                               |                                                                            |
| `role.name`                             | Name of the created Kubernetes role                                                                                | `aspm-collector`                                              |                                                                            |
| `role.ruleSet`                          | Ruleset for the created Kubernetes role. Determines which set of rules will apply to the role (jobs, exec or both) | `[jobs, exec]`                                                |                                                                            |
| `roleBinding.name`                      | Name for the Kubernetes cluster role binding                                                                       | `aspm-collector`                                              |                                                                            |
| `podLabels`                             | ASPM Relay pod labels                                                                                              |                                                               |                                                                            |
| `limits.memory`                         | ASPM Relay container memory limit                                                                                  | `2048Mi`                                                      |                                                                            |
| `limits.cpu`                            | ASPM Relay container CPU limit                                                                                     | `2`                                                           |                                                                            |
| `requests.memory`                       | ASPM Relay container requested memory                                                                              | `0`                                                           |                                                                            |
| `requests.cpu`                          | ASPM Relay container requested CPU                                                                                 | `0`                                                           |                                                                            |
| `podSecurityContext.runAsNonRoot`       | Indicates that the container must run as a non-root user                                                           | `true`                                                        |                                                                            |
| `podSecurityContext.fsGroup`            | A special supplemental group that applies to all containers in a pod                                               | `1001`                                                        |                                                                            |
| `containerSecurityContext.runAsNonRoot` | Indicates that the container must run as a non-root user                                                           | `true`                                                        |                                                                            |
| `containerSecurityContext.fsGroup`      | A special supplemental group that applies to the ASPM Relay container                                              | `1001`                                                        |                                                                            |
| `containerSecurityContext.runAsGroup`   | The GID to run the entrypoint of the container process                                                             | `1001`                                                        |                                                                            |
